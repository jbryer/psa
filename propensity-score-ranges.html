<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B Propensity Score Ranges | Applied Propensity Score Analysis with R</title>
  <meta name="description" content="Introduction to propensity score anaylsis using R." />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="B Propensity Score Ranges | Applied Propensity Score Analysis with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Introduction to propensity score anaylsis using R." />
  <meta name="github-repo" content="jbryer/psa" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B Propensity Score Ranges | Applied Propensity Score Analysis with R" />
  
  <meta name="twitter:description" content="Introduction to propensity score anaylsis using R." />
  

<meta name="author" content="Jason Bryer" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="shiny-application.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Applied PSA with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i><b>0.1</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#counterfactual-model-for-causality"><i class="fa fa-check"></i><b>1.1</b> Counterfactual Model for Causality</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#randomized-control-trials-the-gold-standard"><i class="fa fa-check"></i><b>1.2</b> Randomized Control Trials “The Gold Standard”</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#rubins-causal-model"><i class="fa fa-check"></i><b>1.2.1</b> Rubin’s Causal Model</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#conceptual-steps-for-conducting-propensity-score-analysis"><i class="fa fa-check"></i><b>1.3</b> Conceptual Steps for Conducting Propensity Score Analysis</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#phase-i-modeling-for-selection-bias"><i class="fa fa-check"></i><b>1.3.1</b> Phase I: Modeling for Selection Bias</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#phase-ii-estimate-causal-effects"><i class="fa fa-check"></i><b>1.3.2</b> Phase II: Estimate Causal Effects</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#r-primer"><i class="fa fa-check"></i><b>1.4</b> R Primer</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#datasets"><i class="fa fa-check"></i><b>1.5</b> Datasets</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#lalonde"><i class="fa fa-check"></i><b>1.5.1</b> National Supported Work Demonstration</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#lindner"><i class="fa fa-check"></i><b>1.5.2</b> Lindner Center</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#tutoring"><i class="fa fa-check"></i><b>1.5.3</b> Tutoring</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction.html"><a href="introduction.html#pisa"><i class="fa fa-check"></i><b>1.5.4</b> Programme of International Student Assessment (PISA)</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction.html"><a href="introduction.html#nmes"><i class="fa fa-check"></i><b>1.5.5</b> National Medical Expenditure Study</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="stratification.html"><a href="stratification.html"><i class="fa fa-check"></i><b>2</b> Stratification</a></li>
<li class="chapter" data-level="3" data-path="matching.html"><a href="matching.html"><i class="fa fa-check"></i><b>3</b> Matching</a></li>
<li class="chapter" data-level="4" data-path="weighting.html"><a href="weighting.html"><i class="fa fa-check"></i><b>4</b> Weighting</a></li>
<li class="chapter" data-level="5" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i><b>5</b> Missing Data</a></li>
<li class="chapter" data-level="6" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>6</b> Sensitivity Analysis</a></li>
<li class="chapter" data-level="7" data-path="bootstrapping.html"><a href="bootstrapping.html"><i class="fa fa-check"></i><b>7</b> Bootstrapping</a></li>
<li class="chapter" data-level="8" data-path="non-binary-treatments.html"><a href="non-binary-treatments.html"><i class="fa fa-check"></i><b>8</b> Non-Binary Treatments</a></li>
<li class="chapter" data-level="9" data-path="multilevel-psa.html"><a href="multilevel-psa.html"><i class="fa fa-check"></i><b>9</b> Multilevel PSA</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="shiny-application.html"><a href="shiny-application.html"><i class="fa fa-check"></i><b>A</b> Shiny Application</a></li>
<li class="chapter" data-level="B" data-path="propensity-score-ranges.html"><a href="propensity-score-ranges.html"><i class="fa fa-check"></i><b>B</b> Propensity Score Ranges</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://www.bryer.org" target="blank">Jason Bryer, Ph.D.</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Applied Propensity Score Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="propensity-score-ranges" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">B</span> Propensity Score Ranges<a href="propensity-score-ranges.html#propensity-score-ranges" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This function will create a data frame with three variables (a, b, c) for two groups.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="propensity-score-ranges.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(multilevelPSA)</span>
<span id="cb67-2"><a href="propensity-score-ranges.html#cb67-2" aria-hidden="true" tabindex="-1"></a>getSimulatedData <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">nvars =</span> <span class="dv">3</span>, <span class="at">ntreat =</span> <span class="dv">100</span>, <span class="at">treat.mean =</span> <span class="fl">0.6</span>, <span class="at">treat.sd =</span> <span class="fl">0.5</span>, </span>
<span id="cb67-3"><a href="propensity-score-ranges.html#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncontrol =</span> <span class="dv">1000</span>, <span class="at">control.mean =</span> <span class="fl">0.4</span>, <span class="at">control.sd =</span> <span class="fl">0.5</span>) {</span>
<span id="cb67-4"><a href="propensity-score-ranges.html#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(treat.mean) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb67-5"><a href="propensity-score-ranges.html#cb67-5" aria-hidden="true" tabindex="-1"></a>        treat.mean <span class="ot">=</span> <span class="fu">rep</span>(treat.mean, nvars)</span>
<span id="cb67-6"><a href="propensity-score-ranges.html#cb67-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-7"><a href="propensity-score-ranges.html#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(treat.sd) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb67-8"><a href="propensity-score-ranges.html#cb67-8" aria-hidden="true" tabindex="-1"></a>        treat.sd <span class="ot">=</span> <span class="fu">rep</span>(treat.sd, nvars)</span>
<span id="cb67-9"><a href="propensity-score-ranges.html#cb67-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-10"><a href="propensity-score-ranges.html#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(control.mean) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb67-11"><a href="propensity-score-ranges.html#cb67-11" aria-hidden="true" tabindex="-1"></a>        control.mean <span class="ot">=</span> <span class="fu">rep</span>(control.mean, nvars)</span>
<span id="cb67-12"><a href="propensity-score-ranges.html#cb67-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-13"><a href="propensity-score-ranges.html#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(control.sd) <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb67-14"><a href="propensity-score-ranges.html#cb67-14" aria-hidden="true" tabindex="-1"></a>        control.sd <span class="ot">=</span> <span class="fu">rep</span>(control.sd, nvars)</span>
<span id="cb67-15"><a href="propensity-score-ranges.html#cb67-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-16"><a href="propensity-score-ranges.html#cb67-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-17"><a href="propensity-score-ranges.html#cb67-17" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, ncontrol), <span class="fu">rep</span>(<span class="dv">1</span>, ntreat))</span>
<span id="cb67-18"><a href="propensity-score-ranges.html#cb67-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>nvars) {</span>
<span id="cb67-19"><a href="propensity-score-ranges.html#cb67-19" aria-hidden="true" tabindex="-1"></a>        df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="fu">c</span>(<span class="fu">rnorm</span>(ncontrol, <span class="at">mean =</span> control.mean[<span class="dv">1</span>], <span class="at">sd =</span> control.sd[<span class="dv">1</span>]), </span>
<span id="cb67-20"><a href="propensity-score-ranges.html#cb67-20" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rnorm</span>(ntreat, <span class="at">mean =</span> treat.mean[<span class="dv">1</span>], <span class="at">sd =</span> treat.sd[<span class="dv">1</span>])))</span>
<span id="cb67-21"><a href="propensity-score-ranges.html#cb67-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb67-22"><a href="propensity-score-ranges.html#cb67-22" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(df)</span>
<span id="cb67-23"><a href="propensity-score-ranges.html#cb67-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;treat&quot;</span>, letters[<span class="dv">1</span><span class="sc">:</span>nvars])</span>
<span id="cb67-24"><a href="propensity-score-ranges.html#cb67-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(df)</span>
<span id="cb67-25"><a href="propensity-score-ranges.html#cb67-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>1:10 (100 treatments, 1000 control units)</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="propensity-score-ranges.html#cb68-1" aria-hidden="true" tabindex="-1"></a>test.df1 <span class="ot">&lt;-</span> <span class="fu">getSimulatedData</span>(<span class="at">ntreat =</span> <span class="dv">100</span>, <span class="at">ncontrol =</span> <span class="dv">1000</span>)</span>
<span id="cb68-2"><a href="propensity-score-ranges.html#cb68-2" aria-hidden="true" tabindex="-1"></a>psranges1 <span class="ot">&lt;-</span> <span class="fu">psrange</span>(test.df1, test.df1<span class="sc">$</span>treat, treat <span class="sc">~</span> ., <span class="at">samples =</span> <span class="fu">seq</span>(<span class="dv">100</span>, </span>
<span id="cb68-3"><a href="propensity-score-ranges.html#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">100</span>), <span class="at">nboot =</span> <span class="dv">20</span>)</span>
<span id="cb68-4"><a href="propensity-score-ranges.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(psranges1)</span></code></pre></div>
<p><img src="AppliedPSAwithR_files/figure-html/psranges-1to10-1.png" width="1152" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="propensity-score-ranges.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(psranges1)</span></code></pre></div>
<pre><code>##       p ntreat ncontrol ratio   min.mean       min.sd min.median       min.se
## 1    10    100      100     1 0.15158085 0.0399247330 0.16675914 0.0089274417
## 21   20    100      200     2 0.08065862 0.0110939596 0.07987970 0.0024806848
## 41   30    100      300     3 0.05825915 0.0089598303 0.06117074 0.0020034790
## 61   40    100      400     4 0.03966169 0.0043536309 0.03993927 0.0009735015
## 81   50    100      500     5 0.03028191 0.0038363450 0.02969747 0.0008578328
## 101  60    100      600     6 0.02581532 0.0024130983 0.02594087 0.0005395852
## 121  70    100      700     7 0.02203176 0.0019850490 0.02179919 0.0004438705
## 141  80    100      800     8 0.01903728 0.0013822504 0.01864631 0.0003090806
## 161  90    100      900     9 0.01631016 0.0005450121 0.01627551 0.0001218684
## 181 100    100     1000    10 0.01453930 0.0000000000 0.01453930 0.0000000000
##        min.min    min.max  max.mean     max.sd max.median      max.se   max.min
## 1   0.06536710 0.19336279 0.8598281 0.04676196  0.8501328 0.010456291 0.7861258
## 21  0.05791970 0.10233899 0.7270197 0.04065439  0.7303578 0.009090597 0.6439753
## 41  0.03669016 0.07242601 0.6050233 0.05144961  0.5948197 0.011504482 0.5386225
## 61  0.03200825 0.05010319 0.5606233 0.02683686  0.5606224 0.006000904 0.5089432
## 81  0.02357618 0.03609465 0.5058454 0.02833751  0.4987880 0.006336460 0.4682137
## 101 0.02033462 0.02954242 0.4593096 0.02170712  0.4544798 0.004853860 0.4236357
## 121 0.01906877 0.02678785 0.4255822 0.02072414  0.4292869 0.004634059 0.3811220
## 141 0.01719583 0.02208829 0.3928887 0.01439171  0.3941605 0.003218084 0.3591961
## 161 0.01526377 0.01767972 0.3577524 0.01054775  0.3544386 0.002358548 0.3458710
## 181 0.01453930 0.01453930 0.3306953 0.00000000  0.3306953 0.000000000 0.3306953
##       max.max
## 1   0.9361766
## 21  0.8123514
## 41  0.7304035
## 61  0.6127437
## 81  0.5618276
## 101 0.5129718
## 121 0.4548082
## 141 0.4260502
## 161 0.3798020
## 181 0.3306953</code></pre>
<p>1:20 (100 treatments, 2000 control units)</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="propensity-score-ranges.html#cb71-1" aria-hidden="true" tabindex="-1"></a>test.df2 <span class="ot">&lt;-</span> <span class="fu">getSimulatedData</span>(<span class="at">ncontrol =</span> <span class="dv">2000</span>)</span>
<span id="cb71-2"><a href="propensity-score-ranges.html#cb71-2" aria-hidden="true" tabindex="-1"></a>psranges2 <span class="ot">&lt;-</span> <span class="fu">psrange</span>(test.df2, test.df2<span class="sc">$</span>treat, treat <span class="sc">~</span> ., <span class="at">samples =</span> <span class="fu">seq</span>(<span class="dv">100</span>, </span>
<span id="cb71-3"><a href="propensity-score-ranges.html#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2000</span>, <span class="at">by =</span> <span class="dv">100</span>), <span class="at">nboot =</span> <span class="dv">20</span>)</span>
<span id="cb71-4"><a href="propensity-score-ranges.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(psranges2)</span></code></pre></div>
<p><img src="AppliedPSAwithR_files/figure-html/psranges-1to20-1.png" width="1152" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="propensity-score-ranges.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(psranges2)</span></code></pre></div>
<pre><code>##       p ntreat ncontrol ratio    min.mean       min.sd  min.median       min.se
## 1     5    100      100     1 0.108479153 3.478953e-02 0.113600581 7.779176e-03
## 21   10    100      200     2 0.046371411 1.434092e-02 0.044963287 3.206727e-03
## 41   15    100      300     3 0.031643058 8.312285e-03 0.030554662 1.858683e-03
## 61   20    100      400     4 0.017812919 3.780810e-03 0.017660947 8.454147e-04
## 81   25    100      500     5 0.014711230 2.496677e-03 0.015022455 5.582738e-04
## 101  30    100      600     6 0.010719571 2.578118e-03 0.009863200 5.764847e-04
## 121  35    100      700     7 0.009514228 1.588785e-03 0.009334077 3.552632e-04
## 141  40    100      800     8 0.007691382 1.171925e-03 0.007477029 2.620504e-04
## 161  45    100      900     9 0.006889727 1.222477e-03 0.006726188 2.733541e-04
## 181  50    100     1000    10 0.006276889 5.128093e-04 0.006246931 1.146676e-04
## 201  55    100     1100    11 0.005318209 5.985626e-04 0.005257637 1.338427e-04
## 221  60    100     1200    12 0.004854049 3.641814e-04 0.004806155 8.143343e-05
## 241  65    100     1300    13 0.004545931 3.242687e-04 0.004520731 7.250869e-05
## 261  70    100     1400    14 0.004114851 2.213926e-04 0.004099411 4.950490e-05
## 281  75    100     1500    15 0.003827730 3.163611e-04 0.003794601 7.074050e-05
## 301  80    100     1600    16 0.003565950 1.937171e-04 0.003520204 4.331645e-05
## 321  85    100     1700    17 0.003321481 1.553915e-04 0.003348171 3.474661e-05
## 341  90    100     1800    18 0.003153977 7.759093e-05 0.003159270 1.734986e-05
## 361  95    100     1900    19 0.002936686 5.616000e-05 0.002935480 1.255776e-05
## 381 100    100     2000    20 0.002768276 0.000000e+00 0.002768276 0.000000e+00
##         min.min     min.max  max.mean      max.sd max.median      max.se
## 1   0.058393439 0.170711051 0.8819158 0.032569683  0.8876059 0.007282803
## 21  0.028012247 0.080533570 0.8039199 0.038136538  0.8047723 0.008527589
## 41  0.019685674 0.053076019 0.7255648 0.038281827  0.7324588 0.008560077
## 61  0.012532975 0.025846915 0.6973759 0.039330036  0.6887384 0.008794463
## 81  0.009046485 0.020133140 0.6381940 0.032865186  0.6328090 0.007348879
## 101 0.008257497 0.019303295 0.6197714 0.029943565  0.6216856 0.006695585
## 121 0.006840465 0.013738017 0.5788401 0.029811196  0.5822845 0.006665986
## 141 0.005879615 0.011053336 0.5589409 0.043400845  0.5554842 0.009704724
## 161 0.005364998 0.011462546 0.5217990 0.027818443  0.5244945 0.006220393
## 181 0.005345154 0.007100721 0.4896128 0.022943577  0.4909629 0.005130340
## 201 0.004317742 0.006380071 0.4837967 0.023518184  0.4848799 0.005258826
## 221 0.004328371 0.005446223 0.4630265 0.022398047  0.4599904 0.005008355
## 241 0.004046610 0.005226542 0.4414052 0.023000235  0.4404226 0.005143009
## 261 0.003657161 0.004503838 0.4322617 0.021211389  0.4340543 0.004743011
## 281 0.003223369 0.004460980 0.4089992 0.015626515  0.4098423 0.003494195
## 301 0.003307291 0.003902424 0.3932721 0.015087435  0.3914948 0.003373653
## 321 0.002975258 0.003588740 0.3851770 0.011768615  0.3860391 0.002631542
## 341 0.003005001 0.003287277 0.3760762 0.009748364  0.3764867 0.002179801
## 361 0.002838330 0.003063846 0.3659962 0.003577472  0.3653889 0.000799947
## 381 0.002768276 0.002768276 0.3550118 0.000000000  0.3550118 0.000000000
##       max.min   max.max
## 1   0.8071012 0.9270047
## 21  0.7323388 0.9063155
## 41  0.6191583 0.7766993
## 61  0.5878796 0.7694392
## 81  0.5915755 0.6922287
## 101 0.5586192 0.6855857
## 121 0.5269503 0.6250264
## 141 0.4901740 0.6524009
## 161 0.4480063 0.5559810
## 181 0.4391822 0.5360344
## 201 0.4462260 0.5317380
## 221 0.4234709 0.5015449
## 241 0.3962534 0.4878237
## 261 0.3966437 0.4709061
## 281 0.3779369 0.4337704
## 301 0.3746633 0.4216166
## 321 0.3634942 0.4050216
## 341 0.3531399 0.3906495
## 361 0.3578767 0.3711270
## 381 0.3550118 0.3550118</code></pre>
<p>100 treatments, 1000 control units, equal means and standard deviations</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="propensity-score-ranges.html#cb74-1" aria-hidden="true" tabindex="-1"></a>test.df3 <span class="ot">&lt;-</span> <span class="fu">getSimulatedData</span>(<span class="at">ncontrol =</span> <span class="dv">1000</span>, <span class="at">treat.mean =</span> <span class="fl">0.5</span>, <span class="at">control.mean =</span> <span class="fl">0.5</span>)</span>
<span id="cb74-2"><a href="propensity-score-ranges.html#cb74-2" aria-hidden="true" tabindex="-1"></a>psranges3 <span class="ot">&lt;-</span> <span class="fu">psrange</span>(test.df3, test.df3<span class="sc">$</span>treat, treat <span class="sc">~</span> ., <span class="at">samples =</span> <span class="fu">seq</span>(<span class="dv">100</span>, </span>
<span id="cb74-3"><a href="propensity-score-ranges.html#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">100</span>), <span class="at">nboot =</span> <span class="dv">20</span>)</span>
<span id="cb74-4"><a href="propensity-score-ranges.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(psranges3)</span></code></pre></div>
<p><img src="AppliedPSAwithR_files/figure-html/psranges-100to1000-1.png" width="1152" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="propensity-score-ranges.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(psranges3)</span></code></pre></div>
<pre><code>##       p ntreat ncontrol ratio   min.mean      min.sd min.median       min.se
## 1    10    100      100     1 0.28350601 0.064087988 0.28885238 0.0143305097
## 21   20    100      200     2 0.16705507 0.031529985 0.16046048 0.0070503191
## 41   30    100      300     3 0.12344740 0.019802371 0.12273928 0.0044279448
## 61   40    100      400     4 0.09522531 0.011914719 0.09279009 0.0026642122
## 81   50    100      500     5 0.07563025 0.008418365 0.07552338 0.0018824037
## 101  60    100      600     6 0.06076604 0.008521491 0.06124068 0.0019054633
## 121  70    100      700     7 0.05269255 0.005924987 0.05247310 0.0013248673
## 141  80    100      800     8 0.04586865 0.002395134 0.04624844 0.0005355682
## 161  90    100      900     9 0.04048884 0.002059943 0.04014488 0.0004606172
## 181 100    100     1000    10 0.03634508 0.000000000 0.03634508 0.0000000000
##        min.min    min.max  max.mean     max.sd max.median      max.se   max.min
## 1   0.16192908 0.37939385 0.7132598 0.04361440  0.7129799 0.009752476 0.6394674
## 21  0.10563283 0.22609654 0.5202766 0.04031786  0.5161472 0.009015347 0.4561985
## 41  0.09125843 0.16864202 0.4143754 0.02875963  0.4181810 0.006430849 0.3529161
## 61  0.07550229 0.12048280 0.3532632 0.02511123  0.3510016 0.005615041 0.3137257
## 81  0.06256572 0.09642339 0.2941406 0.02138895  0.2973524 0.004782715 0.2463536
## 101 0.05119536 0.08325665 0.2668781 0.01733506  0.2681488 0.003876236 0.2279083
## 121 0.04216244 0.06796214 0.2363525 0.01411165  0.2348300 0.003155462 0.2141914
## 141 0.04222852 0.05135097 0.2190724 0.01032624  0.2199282 0.002309018 0.2030472
## 161 0.03701920 0.04386187 0.1978531 0.00701747  0.1986408 0.001569154 0.1863798
## 181 0.03634508 0.03634508 0.1835126 0.00000000  0.1835126 0.000000000 0.1835126
##       max.max
## 1   0.7816167
## 21  0.6045684
## 41  0.4675561
## 61  0.3965734
## 81  0.3318606
## 101 0.2927092
## 121 0.2619002
## 141 0.2443409
## 161 0.2090405
## 181 0.1835126</code></pre>
<p>100 treatments, 1000 control units, very little overlap</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="propensity-score-ranges.html#cb77-1" aria-hidden="true" tabindex="-1"></a>test.df4 <span class="ot">&lt;-</span> <span class="fu">getSimulatedData</span>(<span class="at">ncontrol =</span> <span class="dv">1000</span>, <span class="at">treat.mean =</span> <span class="fl">0.25</span>, <span class="at">treat.sd =</span> <span class="fl">0.3</span>, </span>
<span id="cb77-2"><a href="propensity-score-ranges.html#cb77-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">control.mean =</span> <span class="fl">0.75</span>, <span class="at">control.sd =</span> <span class="fl">0.3</span>)</span>
<span id="cb77-3"><a href="propensity-score-ranges.html#cb77-3" aria-hidden="true" tabindex="-1"></a>psranges4 <span class="ot">&lt;-</span> <span class="fu">psrange</span>(test.df4, test.df4<span class="sc">$</span>treat, treat <span class="sc">~</span> ., <span class="at">samples =</span> <span class="fu">seq</span>(<span class="dv">100</span>, </span>
<span id="cb77-4"><a href="propensity-score-ranges.html#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">100</span>), <span class="at">nboot =</span> <span class="dv">20</span>)</span>
<span id="cb77-5"><a href="propensity-score-ranges.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(psranges4)</span></code></pre></div>
<p><img src="AppliedPSAwithR_files/figure-html/psranges-nooverlap-1.png" width="1152" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="propensity-score-ranges.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(psranges4)</span></code></pre></div>
<pre><code>##       p ntreat ncontrol ratio     min.mean       min.sd   min.median
## 1    10    100      100     1 1.525384e-05 2.837735e-05 2.299369e-06
## 21   20    100      200     2 2.386395e-06 4.263708e-06 6.796030e-07
## 41   30    100      300     3 7.854093e-07 1.369501e-06 3.322104e-07
## 61   40    100      400     4 1.139238e-07 9.950192e-08 9.888239e-08
## 81   50    100      500     5 4.970589e-08 7.085309e-08 1.910629e-08
## 101  60    100      600     6 9.456041e-08 8.805110e-08 6.876480e-08
## 121  70    100      700     7 4.562272e-08 3.277532e-08 4.271103e-08
## 141  80    100      800     8 4.834941e-08 1.732541e-08 4.683829e-08
## 161  90    100      900     9 3.734849e-08 1.141374e-08 3.473544e-08
## 181 100    100     1000    10 3.302817e-08 0.000000e+00 3.302817e-08
##           min.se      min.min      min.max  max.mean       max.sd max.median
## 1   6.345368e-06 8.242210e-10 1.189959e-04 0.9999919 1.177109e-05  0.9999975
## 21  9.533941e-07 4.512240e-09 1.459366e-05 0.9999698 4.357035e-05  0.9999873
## 41  3.062298e-07 9.339904e-09 5.821350e-06 0.9999734 2.437621e-05  0.9999837
## 61  2.224931e-08 5.006341e-09 3.452425e-07 0.9999718 2.790507e-05  0.9999803
## 81  1.584323e-08 1.753035e-09 3.004791e-07 0.9999730 3.183032e-05  0.9999857
## 101 1.968882e-08 1.862385e-08 4.026231e-07 0.9999570 1.988995e-05  0.9999546
## 121 7.328785e-09 1.690112e-09 1.093181e-07 0.9999481 3.208612e-05  0.9999523
## 141 3.874079e-09 1.740209e-08 9.088383e-08 0.9999326 1.783491e-05  0.9999357
## 161 2.552189e-09 1.706567e-08 5.651540e-08 0.9999274 1.839133e-05  0.9999295
## 181 0.000000e+00 3.302817e-08 3.302817e-08 0.9999211 0.000000e+00  0.9999211
##           max.se   max.min   max.max
## 1   2.632095e-06 0.9999539 1.0000000
## 21  9.742627e-06 0.9998202 0.9999998
## 41  5.450686e-06 0.9999165 0.9999973
## 61  6.239764e-06 0.9998793 0.9999976
## 81  7.117475e-06 0.9998587 0.9999988
## 101 4.447529e-06 0.9999103 0.9999906
## 121 7.174675e-06 0.9998882 0.9999962
## 141 3.988007e-06 0.9998969 0.9999700
## 161 4.112427e-06 0.9998986 0.9999602
## 181 0.000000e+00 0.9999211 0.9999211</code></pre>
<p>100 treat, 1000 control, 10 covariates</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="propensity-score-ranges.html#cb80-1" aria-hidden="true" tabindex="-1"></a>test.df5 <span class="ot">&lt;-</span> <span class="fu">getSimulatedData</span>(<span class="at">nvars =</span> <span class="dv">10</span>, <span class="at">ntreat =</span> <span class="dv">100</span>, <span class="at">ncontrol =</span> <span class="dv">1000</span>)</span>
<span id="cb80-2"><a href="propensity-score-ranges.html#cb80-2" aria-hidden="true" tabindex="-1"></a>psranges5 <span class="ot">&lt;-</span> <span class="fu">psrange</span>(test.df5, test.df5<span class="sc">$</span>treat, treat <span class="sc">~</span> ., <span class="at">samples =</span> <span class="fu">seq</span>(<span class="dv">100</span>, </span>
<span id="cb80-3"><a href="propensity-score-ranges.html#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">100</span>), <span class="at">nboot =</span> <span class="dv">20</span>)</span>
<span id="cb80-4"><a href="propensity-score-ranges.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(psranges5)</span></code></pre></div>
<p><img src="AppliedPSAwithR_files/figure-html/psranges-10covariates-1.png" width="1152" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="propensity-score-ranges.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(psranges5)</span></code></pre></div>
<pre><code>##       p ntreat ncontrol ratio     min.mean       min.sd   min.median
## 1    10    100      100     1 0.0101680007 5.571726e-03 0.0087507018
## 21   20    100      200     2 0.0032786858 1.986855e-03 0.0031712876
## 41   30    100      300     3 0.0016998723 8.777415e-04 0.0014178615
## 61   40    100      400     4 0.0012710429 7.476010e-04 0.0010189156
## 81   50    100      500     5 0.0009891488 3.613101e-04 0.0009233698
## 101  60    100      600     6 0.0006954162 1.699134e-04 0.0006825701
## 121  70    100      700     7 0.0005748031 1.098981e-04 0.0005927955
## 141  80    100      800     8 0.0005241338 7.766948e-05 0.0005085729
## 161  90    100      900     9 0.0004511794 4.957160e-05 0.0004584537
## 181 100    100     1000    10 0.0004033341 0.000000e+00 0.0004033341
##           min.se      min.min      min.max  max.mean      max.sd max.median
## 1   1.245876e-03 0.0034055594 0.0218076912 0.9797889 0.007606976  0.9810769
## 21  4.442742e-04 0.0010920758 0.0092490802 0.9667801 0.012485108  0.9700905
## 41  1.962690e-04 0.0007561575 0.0045260935 0.9539731 0.013264618  0.9562029
## 61  1.671687e-04 0.0006177711 0.0040260207 0.9394156 0.010526497  0.9424796
## 81  8.079140e-05 0.0005352006 0.0019389389 0.9221930 0.014294291  0.9217427
## 101 3.799379e-05 0.0002784764 0.0009768850 0.9113210 0.017183853  0.9104470
## 121 2.457395e-05 0.0004073415 0.0007375938 0.9032366 0.010021744  0.9045313
## 141 1.736742e-05 0.0003929492 0.0006895618 0.8848322 0.011660804  0.8843501
## 161 1.108455e-05 0.0003240626 0.0005327837 0.8735074 0.008826874  0.8708373
## 181 0.000000e+00 0.0004033341 0.0004033341 0.8639081 0.000000000  0.8639081
##          max.se   max.min   max.max
## 1   0.001700972 0.9612616 0.9912510
## 21  0.002791755 0.9357162 0.9860199
## 41  0.002966059 0.9106519 0.9720211
## 61  0.002353796 0.9129030 0.9566536
## 81  0.003196301 0.8929029 0.9531369
## 101 0.003842426 0.8850449 0.9491578
## 121 0.002240930 0.8856435 0.9235878
## 141 0.002607435 0.8583591 0.9084171
## 161 0.001973749 0.8641812 0.8983841
## 181 0.000000000 0.8639081 0.8639081</code></pre>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="shiny-application.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jbryer/psa/book/edit/master/92-PS_Ranges.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
